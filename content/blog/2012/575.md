+++
title = "redis使用----数据类型和操作命令"
date = "2012-10-24T08:19:10+08:00"
tags = ["uwsgi","c"]
categories = ["linux 应用"]
banner = "img/banners/banner-2.jpg"
draft = false
author = "helight"
authorlink = "https://helight.cn"
summary = ""
keywords = ["uwsgi","c"]
+++

<p style="color: #000000; font-family: 'Times New Roman'; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; background-color: #ffffff; font-size: medium;">最简单的就是key&lt;--&gt;value, 就是每条数据都是一个键名一个键值，如下面的操作
<p style="color: #000000; font-family: 'Times New Roman'; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; background-color: #ffffff; font-size: medium;">在编译之后在源代码目录种就可以启动redis
<p style="color: #000000; font-family: 'Times New Roman'; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; background-color: #ffffff; font-size: medium;">helight@zhwen:/data/opencode/redis/redis-2416/src$ ./redis-server
<p style="color: #000000; font-family: 'Times New Roman'; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; background-color: #ffffff; font-size: medium;">另外在这个源代码目录下还有一个集成客户端：和mysql命令一样启动后就可以登录redis进行命令操作了。
<p style="color: #000000; font-family: 'Times New Roman'; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; background-color: #ffffff; font-size: medium;">helight@zhwen:/data/opencode/redis/redis-2416/src$ ./redis-cli
redis 127.0.0.1:6379&gt; get foo
"\"werwer\""
redis 127.0.0.1:6379&gt;
<p style="color: #000000; font-family: 'Times New Roman'; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; background-color: #ffffff; font-size: medium;">telnet也可以操作
<p style="color: #000000; font-family: 'Times New Roman'; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; background-color: #ffffff; font-size: medium;">helight@zhwen:/data/opencode/redis/redis-2416/src$ telnet 127.0.0.1 6379
Trying 127.0.0.1...
Connected to 127.0.0.1.
Escape character is '^]'.
set foo "werwer"
+OK
get foo
$8
"werwer"
quit
+OK
Connection closed by foreign host.
helight@zhwen:/data/opencode/redis/redis-2416/src$
<p style="color: #000000; font-family: 'Times New Roman'; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; background-color: #ffffff; font-size: medium;">在redis的数据类型种我们一般使用这样几种:Strings、Lists、Hashs、Sets，Sorted sets
<p style="color: #000000; font-family: 'Times New Roman'; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; background-color: #ffffff; font-size: medium;">1.strings类型是最简单的，就是一个key对应一个value，value可以是任意类型的值
<p style="color: #000000; font-family: 'Times New Roman'; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; background-color: #ffffff; font-size: medium;">2.list的操作是这样的：可以从左面插入list，也可以从右面插入list，读取也是一样的。
<p style="color: #000000; font-family: 'Times New Roman'; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; background-color: #ffffff; font-size: medium;">redis 127.0.0.1:6379&gt; rpush xlist 345345
(integer) 1
redis 127.0.0.1:6379&gt; rpush xlist 34sdf
(integer) 2
redis 127.0.0.1:6379&gt; rpush xlist 34sd234
(integer) 3
redis 127.0.0.1:6379&gt; LRANGE xlist 0 4 //读取0～4的所有元素
1) "345345"
2) "34sdf"
3) "34sd234"
redis 127.0.0.1:6379&gt; rpop xlist
"34sd234"
redis 127.0.0.1:6379&gt; lpop xlist
"345345"
redis 127.0.0.1:6379&gt; lpop xlist
"34sdf"
redis 127.0.0.1:6379&gt;
<p style="color: #000000; font-family: 'Times New Roman'; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; background-color: #ffffff; font-size: medium;">3.Hashes类型，hashes和其它不一样的地方是是它有3个字段，<span>key field value，所以在写入内容的控制上就多了一种选择，我感觉这个是非常使用的一种数据结构。</span>
<p style="color: #000000; font-family: 'Times New Roman'; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; background-color: #ffffff; font-size: medium;">redis 127.0.0.1:6379&gt; hset xlog xlog "asdf;asdfk;sdkf"
(integer) 1
redis 127.0.0.1:6379&gt; hset xlog xlog2 "asdf;asdfk;sdkf"
(integer) 1
redis 127.0.0.1:6379&gt; hset xlog xlog2 "as2343423423" //file重复之后，值会被覆盖掉
(integer) 0
redis 127.0.0.1:6379&gt; hgetall xlog //获取所有field和value
1) "xlog"
2) "asdf;asdfk;sdkf"
3) "xlog2"
4) "as2343423423"
redis 127.0.0.1:6379&gt; hget xlog xlog  //获取单个field的value值
"asdf;asdfk;sdkf"
redis 127.0.0.1:6379&gt; hget xlog xlog2
"as2343423423"
redis 127.0.0.1:6379&gt; hexists xlog xlog2 //判断是否存在，存在返回1
(integer) 1
redis 127.0.0.1:6379&gt; hexists xlog xlog3 //不存在返回0
<p style="color: #000000; font-family: 'Times New Roman'; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; background-color: #ffffff; font-size: medium;">(integer) 0
redis 127.0.0.1:6379&gt; hkeys xlog //获取其中的keys
1) "xlog"
2) "xlog2"
redis 127.0.0.1:6379&gt; hlen xlog //获取数据条数
(integer) 2
redis 127.0.0.1:6379&gt; hmset xlog xlog3 "tewta" xlog4 "asdfasdf" //添加多个field value
OK
redis 127.0.0.1:6379&gt; hgetall xlog
1) "xlog"
2) "asdf;asdfk;sdkf"
3) "xlog2"
4) "as2343423423"
5) "xlog3"
6) "tewta"
7) "xlog4"
8) "asdfasdf"
redis 127.0.0.1:6379&gt; hmget xlog xlog3 xlog4 //获取多个field的value
1) "tewta"
2) "asdfasdf"
<p style="color: #000000; font-family: 'Times New Roman'; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; background-color: #ffffff; font-size: medium;"><span>
</span>
<p style="color: #000000; font-family: 'Times New Roman'; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; background-color: #ffffff; font-size: medium;">4.Sets类型，sets就是key的集合体，可以建多个key放到这里面，进行管理。在做存在性判断时候比较有用，它的查找时间为 <span class="math">O(1)的。</span>
<p style="color: #000000; font-family: 'Times New Roman'; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; background-color: #ffffff; font-size: medium;">redis 127.0.0.1:6379&gt; sadd xtest "asdsdf"
(integer) 1
redis 127.0.0.1:6379&gt; sadd xtest "234"
(integer) 1
redis 127.0.0.1:6379&gt; sadd xtest "4343"
(integer) 1
redis 127.0.0.1:6379&gt; smembers xtest //列出所有元素
1) "234"
2) "asdsdf"
3) "4343"
redis 127.0.0.1:6379&gt; sismember xtest 234 //判断元素是否存在
(integer) 1
redis 127.0.0.1:6379&gt; sismember xtest 23423
(integer) 0
redis 127.0.0.1:6379&gt;
&nbsp;